<% content_for :breadcrumbs do %>
  <%= breadcrumb 'Home', root_path(shopify_path_params) %>
  <%= breadcrumb_separator %>
  <%= breadcrumb 'Campaigns', campaigns_path(shopify_path_params) %>
  <%= breadcrumb_separator %>
  <%= breadcrumb 'New Campaign' %>
<% end %>

<div>
  <h1 style="font-size: 24px; font-weight: 600; margin-bottom: 20px;">Create New Campaign</h1>

  <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 24px; max-width: 800px;">
    <%= form_with model: @campaign, local: true, data: { turbo: false } do |form| %>
      <%= hidden_field_tag :shop, params[:shop] if params[:shop].present? %>
      <%= hidden_field_tag :host, params[:host] if params[:host].present? %>
      <%= hidden_field_tag :embedded, params[:embedded] if params[:embedded].present? %>
      <%= hidden_field_tag :id_token, params[:id_token] if params[:id_token].present? %>

      <% if @campaign.errors.any? %>
        <div style="padding: 12px 16px; background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 6px; margin-bottom: 20px; color: #721c24;">
          <strong style="font-weight: 600;"><%= pluralize(@campaign.errors.count, "error") %> prevented this campaign from being saved:</strong>
          <ul style="margin: 8px 0 0 20px; line-height: 1.6;">
            <% @campaign.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div style="margin-bottom: 20px;">
        <%= form.label :name, "Campaign Name", style: 'display: block; font-weight: 600; margin-bottom: 8px; font-size: 14px;' %>
        <%= form.text_field :name,
            required: true,
            placeholder: "e.g., Black Friday 2024, Welcome Credits, etc.",
            style: 'padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: 100%; font-size: 14px;' %>
        <p style="font-size: 13px; color: #666; margin-top: 4px;">
          Give your campaign a unique, descriptive name
        </p>
      </div>

      <div style="margin-bottom: 20px;">
        <%= form.label :description, "Description (Optional)", style: 'display: block; font-weight: 600; margin-bottom: 8px; font-size: 14px;' %>
        <%= form.text_area :description,
            rows: 4,
            placeholder: "Describe the purpose of this campaign...",
            style: 'padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: 100%; font-size: 14px; resize: vertical;' %>
        <p style="font-size: 13px; color: #666; margin-top: 4px;">
          Provide additional context about this campaign for your records
        </p>
      </div>

      <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
        <%= link_to "Cancel", campaigns_path(shopify_path_params),
            style: 'padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; font-weight: 600; text-decoration: none; font-size: 14px; display: inline-block;',
            onmouseover: "this.style.backgroundColor='#5a6268'",
            onmouseout: "this.style.backgroundColor='#6c757d'" %>
        <%= form.submit 'Create Campaign',
            style: 'padding: 10px 24px; background: #007bff; color: white; border: none; border-radius: 4px; font-weight: 600; cursor: pointer; font-size: 14px;',
            onmouseover: "this.style.backgroundColor='#0056b3'",
            onmouseout: "this.style.backgroundColor='#007bff'" %>
      </div>
    <% end %>
  </div>
</div>
