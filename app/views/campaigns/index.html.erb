<% content_for :breadcrumbs do %>
  <%= breadcrumb 'Home', root_path(shopify_path_params) %>
  <%= breadcrumb_separator %>
  <%= breadcrumb 'Campaigns' %>
<% end %>

<div>
  <h1 style="font-size: 24px; font-weight: 600; margin-bottom: 20px;">Campaigns Manager</h1>

  <!-- Quick Actions -->
  <div style="margin-bottom: 24px; display: flex; gap: 12px;">
    <%= link_to 'New Campaign',
        new_campaign_path(shopify_path_params),
        style: 'padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; font-weight: 600; text-decoration: none; font-size: 14px; display: inline-block;' %>
  </div>

  <!-- Campaigns List -->
  <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 24px;">
    <div style="margin-bottom: 16px;">
      <h2 style="font-size: 18px; font-weight: 600; margin: 0;">All Campaigns</h2>
    </div>

    <% if @campaigns.any? %>
      <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="border-bottom: 2px solid #ddd; text-align: left;">
              <th style="padding: 12px; font-weight: 600; color: #666; font-size: 14px;">Name</th>
              <th style="padding: 12px; font-weight: 600; color: #666; font-size: 14px;">Description</th>
              <th style="padding: 12px; font-weight: 600; color: #666; font-size: 14px;">Total Credits</th>
              <th style="padding: 12px; font-weight: 600; color: #666; font-size: 14px;">Total Amount</th>
              <th style="padding: 12px; font-weight: 600; color: #666; font-size: 14px;">Created</th>
              <th style="padding: 12px; font-weight: 600; color: #666; font-size: 14px; text-align: center;">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @campaigns.each do |campaign| %>
              <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 12px; font-size: 14px;">
                  <%= link_to campaign.name, campaign_path(campaign, shopify_path_params), style: "color: #007bff; text-decoration: none; font-weight: 600;" %>
                </td>
                <td style="padding: 12px; font-size: 14px; color: #666;">
                  <%= campaign.description.present? ? truncate(campaign.description, length: 60) : "-" %>
                </td>
                <td style="padding: 12px; font-size: 14px;"><%= campaign.total_credits_count %></td>
                <td style="padding: 12px; font-size: 14px; font-weight: 600;">$<%= number_with_precision(campaign.total_amount, precision: 2) %></td>
                <td style="padding: 12px; font-size: 14px; color: #666;">
                  <%= time_ago_in_words(campaign.created_at) %> ago
                </td>
                <td style="padding: 12px; text-align: center;">
                  <div style="display: inline-flex; gap: 12px; align-items: center;">
                    <%= link_to campaign_path(campaign, shopify_path_params), style: "color: #5C6AC4; text-decoration: none; display: inline-flex; align-items: center; padding: 4px 8px; border-radius: 4px; transition: background-color 0.2s;", onmouseover: "this.style.backgroundColor='#f1f2f4'", onmouseout: "this.style.backgroundColor=''" do %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 4px;">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                      <span style="font-size: 13px;">View</span>
                    <% end %>
                    <%= link_to edit_campaign_path(campaign, shopify_path_params), style: "color: #28a745; text-decoration: none; display: inline-flex; align-items: center; padding: 4px 8px; border-radius: 4px; transition: background-color 0.2s;", onmouseover: "this.style.backgroundColor='#f1f2f4'", onmouseout: "this.style.backgroundColor=''" do %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 4px;">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                      </svg>
                      <span style="font-size: 13px;">Edit</span>
                    <% end %>
                    <%= button_to campaign_path(campaign, shopify_path_params),
                        method: :delete,
                        data: { confirm: "Are you sure? This will not delete the credits, just remove the campaign association.", turbo: false },
                        style: "background: none; border: none; padding: 4px 8px; cursor: pointer; color: #dc3545; display: inline-flex; align-items: center; border-radius: 4px; transition: background-color 0.2s;",
                        onmouseover: "this.style.backgroundColor='#f1f2f4'",
                        onmouseout: "this.style.backgroundColor=''" do %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 4px;">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                      </svg>
                      <span style="font-size: 13px;">Delete</span>
                    <% end %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <%= render 'shared/pagination', collection: @campaigns %>
    <% else %>
      <div style="text-align: center; padding: 40px; color: #666;">
        <p style="font-size: 16px; margin-bottom: 8px;">No campaigns yet</p>
        <p style="font-size: 14px; margin-bottom: 16px;">Create your first campaign to organize your store credits.</p>
        <%= link_to "Create Campaign", new_campaign_path(shopify_path_params), style: 'padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; font-weight: 600; text-decoration: none; font-size: 14px; display: inline-block;' %>
      </div>
    <% end %>
  </div>
</div>
